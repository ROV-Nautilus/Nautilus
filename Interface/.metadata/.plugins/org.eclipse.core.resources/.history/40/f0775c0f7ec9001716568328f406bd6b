package Video;

import java.awt.Color;
import java.awt.Container;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;

public class Interface extends JFrame implements ActionListener{

	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	
	/** Camera carto */
    public String jpgURL1="http://169.254.14.03:8081/";
    public String mjpgURL1="http://169.254.14.03:8081/";
    
    /** Camera FPV */
    public String jpgURL="http://169.254.14.03:8000/";
    public String mjpgURL="http://169.254.14.03:8000/stream.mjpg";
    
    public Container win;


		//Constructeur
		public Interface(String titre, int x, int y, int longueur, int largeur, boolean b){
			super(titre);
			super.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
			super.setLocation(x,y);
			super.setSize(longueur,largeur);
			
			//JFrame jframe = new JFrame();
			
			/* Construction du Conteneur */
			win = getContentPane();
			
	    	/** Barre de menu */
	    	JMenuBar menu= new JMenuBar();
			JMenu fichier=new JMenu("Fichier");
			JMenuItem quitter= new JMenuItem("Quitter");
			quitter.addActionListener(this);
			fichier.add(quitter);
			menu.add(fichier);
			setJMenuBar(menu);
			
			/** Bouton */
			JPanel pan1=new JPanel();
			pan1.setLayout(new GridLayout(1,2));
			
			JButton demarrer = new JButton("Demarrer Camera 1");
			demarrer.addActionListener(this);
			demarrer.setBackground(Color.white);
			pan1.add(demarrer);
			
			JButton demarrer2 = new JButton("Demarrer Camera 2");
			demarrer2.addActionListener(this);
			demarrer2.setBackground(Color.white);
			pan1.add(demarrer2);
			
			win.add(pan1,"South");
			
	    	super.setVisible(b);
		}
	
		
	public void actionPerformed(ActionEvent e) {
		String cmd = e.getActionCommand();
		if(cmd.equals("Quitter")){
			System.exit(0);
		}
		if(cmd.equals("Demarrer Camera 1")){
			Camera axPanel = new Camera(win,jpgURL,mjpgURL,"FPV");
	    	new Thread(axPanel).start();
	    	win.add(axPanel,"West");
		}
		if(cmd.equals("Demarrer Camera 2")){
			Camera axPanel1 = new Camera(win,jpgURL1,mjpgURL1,"Cartographie");
	    	new Thread(axPanel1).start();
	    	win.add(axPanel1,"East");
		}
	}
	
}
